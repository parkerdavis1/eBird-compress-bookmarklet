(()=>{const r=document.querySelectorAll(".Observation");if(r.length===0){alert("No eBird observations found on page!");return}if(document.querySelector("[data-species]")){alert("Already run script. If you are having issues, reload page and try again.");return}const c=r[0].parentNode;function i(n){return n.querySelector(".Observation-species .Heading-main").innerText}function u(n){let e=[];for(const o of n){const t=i(o);e.includes(t)||e.push(t)}return e}function p(n,e){for(const o of n){const t=document.createElement("details");t.setAttribute("data-species",o),t.setAttribute("style","margin-top: 0.5em");const s=document.createElement("summary");s.setAttribute("style","cursor: pointer; list-style:"),s.innerText=o,t.appendChild(s),e.appendChild(t)}}function d(n){for(let e of n){const o=i(e),t=document.querySelector(`[data-species="${o}"]`),s=e.previousElementSibling;t.appendChild(s),t.appendChild(e)}}function l(n){for(species of n){const e=document.querySelectorAll(`[data-species="${species}"] .Observation`).length.toString(),o=document.querySelector(`[data-species="${species}"] summary`);o.innerText=`${o.innerText} (${e})`}}const a=u(r);p(a,c),d(r),l(a)})();
